captainVersion: 4

services:
    '$$cap_appname':
        caproverExtra:
            dockerfileLines:
                - FROM alpine:3.16.2
                - RUN apk add --no-cache unzip openssh
                - RUN apk add --no-cache wget
                - RUN apk add --no-cache openjdk11
                - ADD https://piston-data.mojang.com/v1/objects/f69c284232d7c7580bd89a5a4931c3581eae1378/server.jar /server.jar
                - EXPOSE 25565
                - CMD [ \"java\", \"-Xmx1024M\", \"-Xms1024M\", \"-jar\", \"/server.jar\", \"nogui\" ]
            containerHttpPort: '25565'
        volumes:
            - '$$cap_appname-data:/minecraft'

caproverOneClickApp:
    instructions:
        start: MINECRAFT SERVER
        end: Wait for the server to start, it could take awhile.
    displayName: Minecraft Server
    isOfficial: true
    description: Minecraft Server
    documentation: See https://www.minecraft.net/en-us/download/server/
